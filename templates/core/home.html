{% extends 'base.html' %}
{% load static %}

{% block title %}Compartilhe Conhecimento, Conecte Leitores - CommunityBooks{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="home-hero">
    <div class="hero-background">
        <div class="hero-overlay"></div>
        <div class="hero-pattern"></div>
    </div>
    
    <div class="container">
        <div class="hero-content">
            <div class="hero-badge">
                <i class="fas fa-users me-2"></i>
                +2.500 leitores ativos
            </div>
            
            <h1 class="hero-title">
                Sua comunidade de 
                <span class="hero-highlight">troca de livros</span>
            </h1>
            
            <p class="hero-description">
                Conecte-se com leitores locais, descubra novas histórias e compartilhe seus livros favoritos. 
                Leia mais, gaste menos, faça amigos.
            </p>
            
            <div class="hero-actions">
                <a href="{% url 'books:library' %}" class="btn btn-primary btn-lg hero-btn">
                    <i class="fas fa-search me-2"></i>
                    Explorar Acervo
                </a>
                {% if user.is_authenticated %}
                <a href="{% url 'books:create' %}" class="btn btn-outline-light btn-lg hero-btn">
                    <i class="fas fa-plus me-2"></i>
                    Cadastrar Livro
                </a>
                {% else %}
                <a href="{% url 'user:signup' %}" class="btn btn-outline-light btn-lg hero-btn">
                    <i class="fas fa-rocket me-2"></i>
                    Começar Agora
                </a>
                {% endif %}
            </div>
            
            <div class="hero-stats">
                <div class="stat-item">
                    <div class="stat-number">{{ total_books|default:"1.247" }}</div>
                    <div class="stat-label">Livros Disponíveis</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">{{ active_users|default:"856" }}</div>
                    <div class="stat-label">Leitores Ativos</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">{{ total_loans|default:"3.421" }}</div>
                    <div class="stat-label">Empréstimos Realizados</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scroll Indicator -->
    <div class="scroll-indicator">
        <div class="scroll-arrow"></div>
    </div>
</section>

<!-- Features Grid -->
<section class="section-features">
    <div class="container">
        <div class="section-header center">
            <h2 class="section-title">Como funciona</h2>
            <p class="section-subtitle">Simples, seguro e feito por leitores para leitores</p>
        </div>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-book-open"></i>
                </div>
                <h3 class="feature-title">Cadastre seus livros</h3>
                <p class="feature-description">
                    Adicione os livros que você quer compartilhar. É rápido, fácil e você controla tudo.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-handshake"></i>
                </div>
                <h3 class="feature-title">Conecte-se com leitores</h3>
                <p class="feature-description">
                    Receba solicitações de empréstimo e combine encontros com leitores da sua região.
                </p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-exchange-alt"></i>
                </div>
                <h3 class="feature-title">Compartilhe histórias</h3>
                <p class="feature-description">
                    Empreste seus livros e descubra novas leituras. Todos ganham com o compartilhamento.
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Books Showcase -->
<section class="section-showcase">
    <div class="container">
        <div class="showcase-header">
            <div class="header-content">
                <h2 class="section-title">Livros da comunidade</h2>
                <p class="section-subtitle">Descubra as últimas adições ao nosso acervo coletivo</p>
            </div>
            <a href="{% url 'books:library' %}" class="btn btn-outline-primary">
                Ver todos os livros
                <i class="fas fa-arrow-right ms-2"></i>
            </a>
        </div>
        
        {% if recent_books %}
        <div class="books-showcase">
            {% for book in recent_books %}
            <div class="book-showcase-card">
                <div class="book-cover">
                    {% if book.cover_image %}
                    <img src="{{ book.cover_image.url }}" alt="{{ book.title }}" class="book-image">
                    {% else %}
                    <div class="book-placeholder">
                        <i class="fas fa-book"></i>
                    </div>
                    {% endif %}
                    <div class="book-overlay">
                        <a href="{{ book.get_absolute_url }}" class="btn btn-sm btn-light">
                            Ver detalhes
                        </a>
                    </div>
                </div>
                <div class="book-info">
                    <h3 class="book-title">{{ book.title|truncatewords:6 }}</h3>
                    {% if book.author %}
                    <p class="book-author">{{ book.author }}</p>
                    {% endif %}
                    <div class="book-meta">
                        <span class="meta-item">
                            <i class="fas fa-user"></i>
                            {{ book.owner.full_name|default:book.owner.email }}
                        </span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <div class="empty-icon">
                <i class="fas fa-books"></i>
            </div>
            <h3>Nenhum livro disponível</h3>
            <p>Seja o primeiro a compartilhar um livro na comunidade!</p>
            <a href="{% url 'books:create' %}" class="btn btn-primary">
                <i class="fas fa-plus me-2"></i>
                Cadastrar primeiro livro
            </a>
        </div>
        {% endif %}
    </div>
</section>

<!-- Benefits Section -->
<section class="section-benefits">
    <div class="container">
        <div class="section-header center">
            <h2 class="section-title">Por que fazer parte?</h2>
            <p class="section-subtitle">Vantagens de compartilhar livros com a comunidade</p>
        </div>
        
        <div class="benefits-grid">
            <div class="benefit-card">
                <div class="benefit-icon">
                    <i class="fas fa-piggy-bank"></i>
                </div>
                <h3>Economia inteligente</h3>
                <p>Acesse milhares de livros gratuitamente e compartilhe os seus sem custos.</p>
            </div>
            
            <div class="benefit-card">
                <div class="benefit-icon">
                    <i class="fas fa-leaf"></i>
                </div>
                <h3>Leitura sustentável</h3>
                <p>Reduza o consumo e dê nova vida aos livros que já foram lidos.</p>
            </div>
            
            <div class="benefit-card">
                <div class="benefit-icon">
                    <i class="fas fa-users"></i>
                </div>
                <h3>Comunidade ativa</h3>
                <p>Conheça leitores da sua região e compartilhe experiências literárias.</p>
            </div>
            
            <div class="benefit-card">
                <div class="benefit-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3>Totalmente seguro</h3>
                <p>Sistema de reputação e avaliações para transações seguras entre membros.</p>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials -->
<section class="section-testimonials">
    <div class="container">
        <div class="section-header center">
            <h2 class="section-title">O que os leitores dizem</h2>
            <p class="section-subtitle">Experiências reais da nossa comunidade</p>
        </div>
        
        <div class="testimonials-grid">
            <div class="testimonial-card">
                <div class="testimonial-content">
                    <p>"Encontrei livros incríveis que nunca teria comprado. A comunidade é incrível!"</p>
                </div>
                <div class="testimonial-author">
                    <div class="author-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="author-info">
                        <strong>Marina Silva</strong>
                        <span>Membro há 1 ano</span>
                    </div>
                </div>
            </div>
            
            <div class="testimonial-card">
                <div class="testimonial-content">
                    <p>"Já emprestei mais de 20 livros e fiz amizades incríveis com outros leitores."</p>
                </div>
                <div class="testimonial-author">
                    <div class="author-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="author-info">
                        <strong>Carlos Oliveira</strong>
                        <span>Membro há 2 anos</span>
                    </div>
                </div>
            </div>
            
            <div class="testimonial-card">
                <div class="testimonial-content">
                    <p>"Economizei centenas de reais em livros e descobri autores fantásticos."</p>
                </div>
                <div class="testimonial-author">
                    <div class="author-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="author-info">
                        <strong>Ana Costa</strong>
                        <span>Membro há 6 meses</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Final CTA -->
<section class="section-cta">
    <div class="container">
        <div class="cta-card">
            <div class="cta-content">
                <h2 class="cta-title">Pronto para começar sua jornada literária?</h2>
                <p class="cta-description">
                    Junte-se a milhares de leitores que já descobriram o prazer de compartilhar histórias.
                </p>
                <div class="cta-actions">
                    {% if user.is_authenticated %}
                    <a href="{% url 'books:create' %}" class="btn btn-primary btn-lg">
                        <i class="fas fa-book me-2"></i>
                        Cadastrar meus livros
                    </a>
                    <a href="{% url 'books:library' %}" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-search me-2"></i>
                        Explorar acervo
                    </a>
                    {% else %}
                    <a href="{% url 'user:signup' %}" class="btn btn-primary btn-lg">
                        <i class="fas fa-rocket me-2"></i>
                        Criar minha conta
                    </a>
                    <a href="{% url 'books:library' %}" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-search me-2"></i>
                        Ver livros disponíveis
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Scroll suave para as seções
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
    
    // Animação de entrada dos cards
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // Observar elementos para animação
    document.querySelectorAll('.feature-card, .book-showcase-card, .benefit-card, .testimonial-card').forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'all 0.6s ease-out';
        observer.observe(el);
    });
});
</script>
{% endblock %}