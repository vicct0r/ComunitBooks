{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock %}

{% block title %}{% if user == request.user %}Meu Perfil{% else %}{{ user.full_name|default:user.email }} - CommunityBooks{% endif %}{% endblock %}

{% block content %}
<div class="minimal-profile">
    <!-- CABE√áALHO MINIMALISTA -->
    <div class="minimal-header">
        <div class="header-container">
            <div class="user-basic">
                {% if user.img %}
                    <img src="{{ user.img.thumb.url }}" alt="{{ user.full_name }}" class="minimal-avatar">
                {% else %}
                    <div class="minimal-avatar-placeholder">
                        <i class="fas fa-user"></i>
                    </div>
                {% endif %}
                <div class="user-core">
                    <h1>{{ user.full_name|default:user.email }}</h1>
                    <div class="user-location">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>S√£o Paulo, SP ‚Ä¢ 2.5km</span>
                    </div>
                </div>
            </div>
            
            <div class="user-stats">
                <div class="stat">
                    <div class="number">{{ user.score|default:"85" }}</div>
                    <div class="label">pontos</div>
                </div>
                <div class="stat">
                    <div class="number">8</div>
                    <div class="label">dispon√≠veis</div>
                </div>
                <div class="stat">
                    <div class="number">47</div>
                    <div class="label">trocas</div>
                </div>
            </div>
        </div>
    </div>

    <!-- CONTE√öDO -->
    <div class="minimal-content">
        <div class="content-main">
            <!-- A√á√ïES -->
            <div class="action-row">
                {% if user == request.user %}
                <a href="{% url 'books:create' %}" class="minimal-btn primary">
                    <i class="fas fa-plus"></i> Adicionar Livro
                </a>
                <a href="{% url 'user:profile_update' user.id %}" class="minimal-btn">
                    <i class="fas fa-cog"></i> Configurar
                </a>
                {% else %}
                <button class="minimal-btn primary">
                    <i class="fas fa-comment"></i> Mensagem
                </button>
                <a href="{% url 'books:user_library' user_id=user.id %}" class="minimal-btn">
                    <i class="fas fa-book"></i> Biblioteca
                </a>
                {% endif %}
            </div>

            <!-- LIVROS -->
            <section class="minimal-section">
                <h2>Livros Dispon√≠veis</h2>
                <div class="books-minimal">
                    {% for i in "123"|make_list %}
                    <div class="book-minimal">
                        <div class="book-minimal-cover">
                            <div class="cover-placeholder">
                                <span>{% if i == "1" %}1984{% elif i == "2" %}HP{% else %}OP{% endif %}</span>
                            </div>
                        </div>
                        <div class="book-minimal-info">
                            <h3>{% if i == "1" %}1984{% elif i == "2" %}Harry Potter{% else %}O Pequeno Pr√≠ncipe{% endif %}</h3>
                            <p>{% if i == "1" %}George Orwell{% elif i == "2" %}J.K. Rowling{% else %}Saint-Exup√©ry{% endif %}</p>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <a href="{% url 'books:user_library' user_id=user.id %}" class="view-more">Ver todos os livros ‚Üí</a>
            </section>

            <!-- ATIVIDADES -->
            <section class="minimal-section">
                <h2>Atividades</h2>
                <div class="activities-minimal">
                    <div class="activity-minimal">
                        <div class="activity-icon">üìö</div>
                        <div class="activity-text">
                            <p>Emprestou "O Hobbit" para Maria</p>
                            <span>Hoje, 14:30</span>
                        </div>
                    </div>
                    <div class="activity-minimal">
                        <div class="activity-icon">üîî</div>
                        <div class="activity-text">
                            <p>Solicita√ß√£o de "1984" recebida</p>
                            <span>Ontem, 09:15</span>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <div class="content-sidebar">
            <!-- INFORMA√á√ïES -->
            <div class="info-box">
                <h3>Informa√ß√µes</h3>
                <ul class="info-list">
                    <li><i class="fas fa-calendar"></i> Membro desde 2023</li>
                    <li><i class="fas fa-history"></i> Responde em 2.4h</li>
                    <li><i class="fas fa-map-pin"></i> Centro de SP</li>
                    <li><i class="fas fa-clock"></i> Fins de semana</li>
                </ul>
            </div>

            <!-- INTERESSES -->
            <div class="info-box">
                <h3>Interesses</h3>
                <div class="tags-minimal">
                    <span>Fic√ß√£o</span>
                    <span>Cl√°ssicos</span>
                    <span>Fantasia</span>
                    <span>Distopia</span>
                </div>
            </div>

            <!-- DEVOLU√á√ïES -->
            <div class="info-box">
                <h3>Pr√≥ximas Devolu√ß√µes</h3>
                <div class="returns-minimal">
                    <div class="return-minimal">
                        <strong>O Senhor dos An√©is</strong>
                        <div>Jo√£o Silva ‚Ä¢ 15/12</div>
                    </div>
                    <div class="return-minimal">
                        <strong>A Revolu√ß√£o dos Bichos</strong>
                        <div>Maria Santos ‚Ä¢ 18/12</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}